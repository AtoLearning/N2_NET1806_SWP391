{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate,useParams}from'react-router-dom';import axios from'axios';import{toast}from'react-toastify';import'../styles/formAddEdit.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const URL='https://6666c4dca2f8516ff7a4d335.mockapi.io/staffManagement';const initialState={name:'',avatar:'',age:'',address:'',createdAt:Math.floor(Date.now()/1000)};const error_init={name_err:'',avatar_err:'',age_err:'',address_err:''};const FormAddEdit=()=>{const{id}=useParams();const navigate=useNavigate();const[state,setState]=useState(initialState);const{name,avatar,age,address}=state;const[errors,setErrors]=useState(error_init);const getOneStaff=async id=>{const res=await axios.get(\"\".concat(URL,\"/\").concat(id));// console.log(res.data);\nif(res.status===200){setState(res.data);}};useEffect(()=>{if(id)getOneStaff(id);},[id]);const updateStaff=async(staffID,data)=>{const res=await axios.put(\"\".concat(URL,\"/\").concat(staffID),data);if(res.status===200){toast.success(\"Updated Staff with ID: \".concat(staffID,\" successfully ~\"));navigate('/dashboard');}};const addNewStaff=async data=>{const res=await axios.post(\"\".concat(URL),data);if(res.status===200||res.status===201){toast.success(\"New Staff has been added successfully ~\");navigate('/dashboard');}};// validate\nconst validateForm=()=>{let isValid=true;let errors={...error_init};if(name.trim()===''||name.length<2){errors.name_err='Name is Required';if(name.length<2){errors.name_err='Name must be more than 2 words';}isValid=false;}if(avatar.trim()===''){errors.avatar_err='Avatar is required';isValid=false;}if(isNaN(age)||parseInt(age)<1||age===''){errors.age_err='Age must be a positive number and more than 0';isValid=false;}if(address.trim()===''){errors.address_err='Address is required';isValid=false;}setErrors(errors);return isValid;};const handleSubmit=event=>{event.preventDefault();if(validateForm()){if(id)updateStaff(id,state);else addNewStaff(state);}else{toast.error(\"Some info is invalid ~ Pls check again\");}};const handleInputChange=event=>{let{name,value}=event.target;setState(state=>({...state,[name]:value}));};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:id?\"Update Form\":\"Add New Staff\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Name: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:state.name,onChange:handleInputChange}),errors.name_err&&/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:errors.name_err})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"avatar\",children:\"Avatar: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"avatar\",value:state.avatar,onChange:handleInputChange}),errors.avatar_err&&/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:errors.avatar_err})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"age\",children:\"Age: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"age\",value:state.age,onChange:handleInputChange}),errors.age_err&&/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:errors.age_err})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"address\",children:\"Address: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"address\",value:state.address,onChange:handleInputChange}),errors.address_err&&/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:errors.address_err})]}),id&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"createdAt\",children:\"Created At: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"createdAt\",value:new Date(state.createdAt*1000).toLocaleDateString(),readOnly:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"form-button\",children:id?\"Update\":\"Submit\"})]})]})});};export default FormAddEdit;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useParams","axios","toast","jsx","_jsx","jsxs","_jsxs","URL","initialState","name","avatar","age","address","createdAt","Math","floor","Date","now","error_init","name_err","avatar_err","age_err","address_err","FormAddEdit","id","navigate","state","setState","errors","setErrors","getOneStaff","res","get","concat","status","data","updateStaff","staffID","put","success","addNewStaff","post","validateForm","isValid","trim","length","isNaN","parseInt","handleSubmit","event","preventDefault","error","handleInputChange","value","target","className","children","onSubmit","htmlFor","type","onChange","toLocaleDateString","readOnly"],"sources":["D:/Downloads/commonPractice-shared/src/components/FormAddEdit.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport { toast } from 'react-toastify';\nimport '../styles/formAddEdit.css';\n\nconst URL = 'https://6666c4dca2f8516ff7a4d335.mockapi.io/staffManagement';\n\nconst initialState = {\n    name: '',\n    avatar: '',\n    age: '',\n    address: '',\n    createdAt: Math.floor(Date.now() / 1000)\n}\n\nconst error_init = {\n    name_err: '',\n    avatar_err: '',\n    age_err: '',\n    address_err: '',\n}\n\nconst FormAddEdit = () => {\n\n    const { id } = useParams();\n    const navigate = useNavigate();\n\n    const [state, setState] = useState(initialState);\n    const { name, avatar, age, address } = state;\n    const [errors, setErrors] = useState(error_init);\n\n    const getOneStaff = async (id) => {\n        const res = await axios.get(`${URL}/${id}`);\n        // console.log(res.data);\n        if (res.status === 200) {\n            setState(res.data);\n        }\n    }\n\n    useEffect(() => {\n        if (id) getOneStaff(id);\n    }, [id]);\n\n    const updateStaff = async (staffID, data) => {\n        const res = await axios.put(`${URL}/${staffID}`, data);\n        if (res.status === 200) {\n            toast.success(`Updated Staff with ID: ${staffID} successfully ~`);\n            navigate('/dashboard');\n        }\n    }\n\n    const addNewStaff = async (data) => {\n        const res = await axios.post(`${URL}`, data);\n        if (res.status === 200 || res.status === 201) {\n            toast.success(\"New Staff has been added successfully ~\");\n            navigate('/dashboard');\n        }\n    }\n\n    // validate\n    const validateForm = () => {\n        let isValid = true;\n        let errors = { ...error_init };\n\n        if (name.trim() === '' || name.length < 2) {\n            errors.name_err = 'Name is Required';\n            if (name.length < 2) {\n                errors.name_err = 'Name must be more than 2 words';\n            }\n            isValid = false;\n        }\n\n        if (avatar.trim() === '') {\n            errors.avatar_err = 'Avatar is required';\n            isValid = false;\n        }\n\n        if (isNaN(age) || parseInt(age) < 1 || age === '') {\n            errors.age_err = 'Age must be a positive number and more than 0';\n            isValid = false;\n        }\n\n        if (address.trim() === '') {\n            errors.address_err = 'Address is required';\n            isValid = false;\n        }\n\n        setErrors(errors);\n        return isValid;\n    }\n\n    const handleSubmit = (event) => {\n        event.preventDefault();\n        if (validateForm()) {\n            if (id) updateStaff(id, state);\n            else addNewStaff(state);\n        } else {\n            toast.error(\"Some info is invalid ~ Pls check again\");\n        }\n    }\n\n    const handleInputChange = (event) => {\n        let { name, value } = event.target;\n        setState((state) => ({ ...state, [name]: value }));\n    }\n\n    return (\n        <div className='container'>\n            <div className=\"form\">\n                <h2>{id ? \"Update Form\" : \"Add New Staff\"}</h2>\n                <form onSubmit={handleSubmit}>\n                    <div>\n                        <label htmlFor=\"name\">Name: </label>\n                        <input type=\"text\" name='name' value={state.name} onChange={handleInputChange} />\n                        {errors.name_err && <span className='error'>{errors.name_err}</span>}\n                    </div>\n                    <div>\n                        <label htmlFor=\"avatar\">Avatar: </label>\n                        <input type=\"text\" name='avatar' value={state.avatar} onChange={handleInputChange} />\n                        {errors.avatar_err && <span className='error'>{errors.avatar_err}</span>}\n                    </div>\n                    <div>\n                        <label htmlFor=\"age\">Age: </label>\n                        <input type=\"number\" name='age' value={state.age} onChange={handleInputChange} />\n                        {errors.age_err && <span className='error'>{errors.age_err}</span>}\n                    </div>\n                    <div>\n                        <label htmlFor=\"address\">Address: </label>\n                        <input type=\"text\" name='address' value={state.address} onChange={handleInputChange} />\n                        {errors.address_err && <span className='error'>{errors.address_err}</span>}\n                    </div>\n                    {id && (\n                        <div>\n                            <label htmlFor=\"createdAt\">Created At: </label>\n                            <input type=\"text\" name='createdAt' value={new Date(state.createdAt * 1000).toLocaleDateString()} readOnly />\n                        </div>\n                    )}\n                    <button type='submit' className='form-button'>{id ? \"Update\" : \"Submit\"}</button>\n                </form>\n            </div>\n        </div>\n    );\n};\n\nexport default FormAddEdit;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,CAAEC,SAAS,KAAQ,kBAAkB,CACzD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,KAAK,KAAQ,gBAAgB,CACtC,MAAO,2BAA2B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEnC,KAAM,CAAAC,GAAG,CAAG,6DAA6D,CAEzE,KAAM,CAAAC,YAAY,CAAG,CACjBC,IAAI,CAAE,EAAE,CACRC,MAAM,CAAE,EAAE,CACVC,GAAG,CAAE,EAAE,CACPC,OAAO,CAAE,EAAE,CACXC,SAAS,CAAEC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAG,IAAI,CAC3C,CAAC,CAED,KAAM,CAAAC,UAAU,CAAG,CACfC,QAAQ,CAAE,EAAE,CACZC,UAAU,CAAE,EAAE,CACdC,OAAO,CAAE,EAAE,CACXC,WAAW,CAAE,EACjB,CAAC,CAED,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CAEtB,KAAM,CAAEC,EAAG,CAAC,CAAGxB,SAAS,CAAC,CAAC,CAC1B,KAAM,CAAAyB,QAAQ,CAAG1B,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAC2B,KAAK,CAAEC,QAAQ,CAAC,CAAG9B,QAAQ,CAACW,YAAY,CAAC,CAChD,KAAM,CAAEC,IAAI,CAAEC,MAAM,CAAEC,GAAG,CAAEC,OAAQ,CAAC,CAAGc,KAAK,CAC5C,KAAM,CAACE,MAAM,CAAEC,SAAS,CAAC,CAAGhC,QAAQ,CAACqB,UAAU,CAAC,CAEhD,KAAM,CAAAY,WAAW,CAAG,KAAO,CAAAN,EAAE,EAAK,CAC9B,KAAM,CAAAO,GAAG,CAAG,KAAM,CAAA9B,KAAK,CAAC+B,GAAG,IAAAC,MAAA,CAAI1B,GAAG,MAAA0B,MAAA,CAAIT,EAAE,CAAE,CAAC,CAC3C;AACA,GAAIO,GAAG,CAACG,MAAM,GAAK,GAAG,CAAE,CACpBP,QAAQ,CAACI,GAAG,CAACI,IAAI,CAAC,CACtB,CACJ,CAAC,CAEDrC,SAAS,CAAC,IAAM,CACZ,GAAI0B,EAAE,CAAEM,WAAW,CAACN,EAAE,CAAC,CAC3B,CAAC,CAAE,CAACA,EAAE,CAAC,CAAC,CAER,KAAM,CAAAY,WAAW,CAAG,KAAAA,CAAOC,OAAO,CAAEF,IAAI,GAAK,CACzC,KAAM,CAAAJ,GAAG,CAAG,KAAM,CAAA9B,KAAK,CAACqC,GAAG,IAAAL,MAAA,CAAI1B,GAAG,MAAA0B,MAAA,CAAII,OAAO,EAAIF,IAAI,CAAC,CACtD,GAAIJ,GAAG,CAACG,MAAM,GAAK,GAAG,CAAE,CACpBhC,KAAK,CAACqC,OAAO,2BAAAN,MAAA,CAA2BI,OAAO,mBAAiB,CAAC,CACjEZ,QAAQ,CAAC,YAAY,CAAC,CAC1B,CACJ,CAAC,CAED,KAAM,CAAAe,WAAW,CAAG,KAAO,CAAAL,IAAI,EAAK,CAChC,KAAM,CAAAJ,GAAG,CAAG,KAAM,CAAA9B,KAAK,CAACwC,IAAI,IAAAR,MAAA,CAAI1B,GAAG,EAAI4B,IAAI,CAAC,CAC5C,GAAIJ,GAAG,CAACG,MAAM,GAAK,GAAG,EAAIH,GAAG,CAACG,MAAM,GAAK,GAAG,CAAE,CAC1ChC,KAAK,CAACqC,OAAO,CAAC,yCAAyC,CAAC,CACxDd,QAAQ,CAAC,YAAY,CAAC,CAC1B,CACJ,CAAC,CAED;AACA,KAAM,CAAAiB,YAAY,CAAGA,CAAA,GAAM,CACvB,GAAI,CAAAC,OAAO,CAAG,IAAI,CAClB,GAAI,CAAAf,MAAM,CAAG,CAAE,GAAGV,UAAW,CAAC,CAE9B,GAAIT,IAAI,CAACmC,IAAI,CAAC,CAAC,GAAK,EAAE,EAAInC,IAAI,CAACoC,MAAM,CAAG,CAAC,CAAE,CACvCjB,MAAM,CAACT,QAAQ,CAAG,kBAAkB,CACpC,GAAIV,IAAI,CAACoC,MAAM,CAAG,CAAC,CAAE,CACjBjB,MAAM,CAACT,QAAQ,CAAG,gCAAgC,CACtD,CACAwB,OAAO,CAAG,KAAK,CACnB,CAEA,GAAIjC,MAAM,CAACkC,IAAI,CAAC,CAAC,GAAK,EAAE,CAAE,CACtBhB,MAAM,CAACR,UAAU,CAAG,oBAAoB,CACxCuB,OAAO,CAAG,KAAK,CACnB,CAEA,GAAIG,KAAK,CAACnC,GAAG,CAAC,EAAIoC,QAAQ,CAACpC,GAAG,CAAC,CAAG,CAAC,EAAIA,GAAG,GAAK,EAAE,CAAE,CAC/CiB,MAAM,CAACP,OAAO,CAAG,+CAA+C,CAChEsB,OAAO,CAAG,KAAK,CACnB,CAEA,GAAI/B,OAAO,CAACgC,IAAI,CAAC,CAAC,GAAK,EAAE,CAAE,CACvBhB,MAAM,CAACN,WAAW,CAAG,qBAAqB,CAC1CqB,OAAO,CAAG,KAAK,CACnB,CAEAd,SAAS,CAACD,MAAM,CAAC,CACjB,MAAO,CAAAe,OAAO,CAClB,CAAC,CAED,KAAM,CAAAK,YAAY,CAAIC,KAAK,EAAK,CAC5BA,KAAK,CAACC,cAAc,CAAC,CAAC,CACtB,GAAIR,YAAY,CAAC,CAAC,CAAE,CAChB,GAAIlB,EAAE,CAAEY,WAAW,CAACZ,EAAE,CAAEE,KAAK,CAAC,CAAC,IAC1B,CAAAc,WAAW,CAACd,KAAK,CAAC,CAC3B,CAAC,IAAM,CACHxB,KAAK,CAACiD,KAAK,CAAC,wCAAwC,CAAC,CACzD,CACJ,CAAC,CAED,KAAM,CAAAC,iBAAiB,CAAIH,KAAK,EAAK,CACjC,GAAI,CAAExC,IAAI,CAAE4C,KAAM,CAAC,CAAGJ,KAAK,CAACK,MAAM,CAClC3B,QAAQ,CAAED,KAAK,GAAM,CAAE,GAAGA,KAAK,CAAE,CAACjB,IAAI,EAAG4C,KAAM,CAAC,CAAC,CAAC,CACtD,CAAC,CAED,mBACIjD,IAAA,QAAKmD,SAAS,CAAC,WAAW,CAAAC,QAAA,cACtBlD,KAAA,QAAKiD,SAAS,CAAC,MAAM,CAAAC,QAAA,eACjBpD,IAAA,OAAAoD,QAAA,CAAKhC,EAAE,CAAG,aAAa,CAAG,eAAe,CAAK,CAAC,cAC/ClB,KAAA,SAAMmD,QAAQ,CAAET,YAAa,CAAAQ,QAAA,eACzBlD,KAAA,QAAAkD,QAAA,eACIpD,IAAA,UAAOsD,OAAO,CAAC,MAAM,CAAAF,QAAA,CAAC,QAAM,CAAO,CAAC,cACpCpD,IAAA,UAAOuD,IAAI,CAAC,MAAM,CAAClD,IAAI,CAAC,MAAM,CAAC4C,KAAK,CAAE3B,KAAK,CAACjB,IAAK,CAACmD,QAAQ,CAAER,iBAAkB,CAAE,CAAC,CAChFxB,MAAM,CAACT,QAAQ,eAAIf,IAAA,SAAMmD,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAE5B,MAAM,CAACT,QAAQ,CAAO,CAAC,EACnE,CAAC,cACNb,KAAA,QAAAkD,QAAA,eACIpD,IAAA,UAAOsD,OAAO,CAAC,QAAQ,CAAAF,QAAA,CAAC,UAAQ,CAAO,CAAC,cACxCpD,IAAA,UAAOuD,IAAI,CAAC,MAAM,CAAClD,IAAI,CAAC,QAAQ,CAAC4C,KAAK,CAAE3B,KAAK,CAAChB,MAAO,CAACkD,QAAQ,CAAER,iBAAkB,CAAE,CAAC,CACpFxB,MAAM,CAACR,UAAU,eAAIhB,IAAA,SAAMmD,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAE5B,MAAM,CAACR,UAAU,CAAO,CAAC,EACvE,CAAC,cACNd,KAAA,QAAAkD,QAAA,eACIpD,IAAA,UAAOsD,OAAO,CAAC,KAAK,CAAAF,QAAA,CAAC,OAAK,CAAO,CAAC,cAClCpD,IAAA,UAAOuD,IAAI,CAAC,QAAQ,CAAClD,IAAI,CAAC,KAAK,CAAC4C,KAAK,CAAE3B,KAAK,CAACf,GAAI,CAACiD,QAAQ,CAAER,iBAAkB,CAAE,CAAC,CAChFxB,MAAM,CAACP,OAAO,eAAIjB,IAAA,SAAMmD,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAE5B,MAAM,CAACP,OAAO,CAAO,CAAC,EACjE,CAAC,cACNf,KAAA,QAAAkD,QAAA,eACIpD,IAAA,UAAOsD,OAAO,CAAC,SAAS,CAAAF,QAAA,CAAC,WAAS,CAAO,CAAC,cAC1CpD,IAAA,UAAOuD,IAAI,CAAC,MAAM,CAAClD,IAAI,CAAC,SAAS,CAAC4C,KAAK,CAAE3B,KAAK,CAACd,OAAQ,CAACgD,QAAQ,CAAER,iBAAkB,CAAE,CAAC,CACtFxB,MAAM,CAACN,WAAW,eAAIlB,IAAA,SAAMmD,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAE5B,MAAM,CAACN,WAAW,CAAO,CAAC,EACzE,CAAC,CACLE,EAAE,eACClB,KAAA,QAAAkD,QAAA,eACIpD,IAAA,UAAOsD,OAAO,CAAC,WAAW,CAAAF,QAAA,CAAC,cAAY,CAAO,CAAC,cAC/CpD,IAAA,UAAOuD,IAAI,CAAC,MAAM,CAAClD,IAAI,CAAC,WAAW,CAAC4C,KAAK,CAAE,GAAI,CAAArC,IAAI,CAACU,KAAK,CAACb,SAAS,CAAG,IAAI,CAAC,CAACgD,kBAAkB,CAAC,CAAE,CAACC,QAAQ,MAAE,CAAC,EAC5G,CACR,cACD1D,IAAA,WAAQuD,IAAI,CAAC,QAAQ,CAACJ,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAEhC,EAAE,CAAG,QAAQ,CAAG,QAAQ,CAAS,CAAC,EAC/E,CAAC,EACN,CAAC,CACL,CAAC,CAEd,CAAC,CAED,cAAe,CAAAD,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}